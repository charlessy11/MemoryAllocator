## Test 06: Testing first_fit [1 pts]

```

# Check to make sure there were no extra pages
ALLOCATOR_ALGORITHM=${algo} \
tests/progs/allocations-2 2> /dev/null || test_end
Pages at start = 595; pages after allocations = 596

output=$( \
    ALLOCATOR_ALGORITHM=${algo} \
    tests/progs/allocations-3)
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 3496
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 600
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 600
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 3496
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 600
../../allocator.c:96:split_block(): New Size of Second New Block = 3496
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 2392
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 1104
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 1104
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 2392
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 1104
../../allocator.c:96:split_block(): New Size of Second New Block = 2392
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 2040
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 352
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 352
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 2040
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 352
../../allocator.c:96:split_block(): New Size of Second New Block = 2040
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 1640
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 400
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 400
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 1640
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 400
../../allocator.c:96:split_block(): New Size of Second New Block = 1640
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 1136
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 504
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 504
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 1136
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 504
../../allocator.c:96:split_block(): New Size of Second New Block = 1136
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 400
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 704
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 704
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 400
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 704
../../allocator.c:96:split_block(): New Size of Second New Block = 400
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 144
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 256
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 256
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 144
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 256
../../allocator.c:96:split_block(): New Size of Second New Block = 144
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:170:first_fit(): Found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 0
../../allocator.c:165:first_fit(): 	--FIRST FIT--
../../allocator.c:175:first_fit(): NO found free block!../../allocator.c:52:split_block(): --Splitting blocks--
../../allocator.c:63:split_block(): New Size = 3992
../../allocator.c:73:split_block(): Block/Header Size = 108
../../allocator.c:74:split_block(): Block Size Being Split = 4200
../../allocator.c:75:split_block(): New Size of First Block AFTER Split = 4200
../../allocator.c:76:split_block(): New Size of Second Block AFTER Split = 3992
../../allocator.c:94:split_block(): Block/Header Size = 108
../../allocator.c:95:split_block(): New Size of Block = 4200
../../allocator.c:96:split_block(): New Size of Second New Block = 3992
../../allocator.c:97:split_block(): SUCCESS! Able to split blocks!

echo "${output}"
-- Current Memory State --
[REGION 0] 0x7f8ff2878000
  [BLOCK] 0x7f8ff2878000-0x7f8ff2878258 'Test Allocation: 0' 600 [USED]
  [BLOCK] 0x7f8ff2878258-0x7f8ff2878518 'Test Allocation: 5' 704 [USED]
  [BLOCK] 0x7f8ff2878518-0x7f8ff2878618 'Test Allocation: 6' 256 [USED]
  [BLOCK] 0x7f8ff2878618-0x7f8ff28786a8 'Test Allocation: 7' 144 [USED]
  [BLOCK] 0x7f8ff28786a8-0x7f8ff2878808 'Test Allocation: 2' 352 [USED]
  [BLOCK] 0x7f8ff2878808-0x7f8ff2878998 'Test Allocation: 3' 400 [FREE]
  [BLOCK] 0x7f8ff2878998-0x7f8ff2878b90 'Test Allocation: 4' 504 [USED]
  [BLOCK] 0x7f8ff2878b90-0x7f8ff2879000 '' 1136 [FREE]
[REGION 1] 0x7f8ff2846000
  [BLOCK] 0x7f8ff2846000-0x7f8ff2847068 'Allocation 1' 4200 [USED]
  [BLOCK] 0x7f8ff2847068-0x7f8ff2848000 '' 3992 [FREE]

# Get the block ordering from the output. We ignore unnamed allocations.
block_order=$(grep 'Test Allocation:' <<< "${output}" \
    | sed "s/.*'Test Allocation: \([0-9]*\)'.*/Test Allocation: \1/g")

compare <(echo "${expected_order}") <(echo "${block_order}") || test_end

Expected Program Output                        | Actual Program Output
-----------------------------------------------V----------------------------------------------
Test Allocation: 0                               Test Allocation: 0
Test Allocation: 5                               Test Allocation: 5
Test Allocation: 6                               Test Allocation: 6
Test Allocation: 7                               Test Allocation: 7
Test Allocation: 2                               Test Allocation: 2
Test Allocation: 3                               Test Allocation: 3
Test Allocation: 4                               Test Allocation: 4
-----------------------------------------------^----------------------------------------------
 --> OK

test_end
```

